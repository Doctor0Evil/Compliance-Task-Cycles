module CI_NPC_AI_Pipeline

STAGE test-npc-behavior
  description "Unit, integration, and scenario tests for NPC logic"
  ENVIRONMENT runner "ubuntu-latest"
  ACTION exec
    LOG "Starting Behavior tests"
    RUN aln test --module npc --type unit
    RUN aln test --module npc --type integration
    RUN aln test --module npc --type scenario
    LOG "Behavior tests complete"

STAGE test-pathfinding
  description "Validate all NPC pathfinding decision graphs and heuristics"
  ENVIRONMENT runner "ubuntu-latest"
  ACTION exec
    LOG "Executing NPC Pathfinding tests"
    RUN aln ai.pathfinding.test --npcs all --benchmark true

STAGE validate-input-data
  description "Verify NPC config spreadsheets, schema, and allowed value ranges"
  ENVIRONMENT runner "ubuntu-latest"
  ACTION exec
    LOG "Validating data/npc_attributes.aln.csv with ALN-DataFilter"
    RUN aln data.validate --file data/npc_attributes.aln.csv --schema npc

STAGE dialogue-integrity
  description "Test all dialogue generation, indexing, and NLP dampening"
  ENVIRONMENT runner "ubuntu-latest"
  ACTION exec
    LOG "Testing procedural dialogue"
    RUN aln dialogue.index --all
    RUN aln test --module npc.dialogue
    RUN aln nlp.dampen --testset dialogue

STAGE event-distribution
  description "Continuous validated event distribution with overflow prevention"
  ENVIRONMENT runner "ubuntu-latest"
  ACTION exec
    LOG "Running real-time event distribution"
    RUN aln event.distribute --all --timeout 20
    LOG "All events distributed with overflow checks"

STAGE monitor-behavior
  description "Real-time NPC behavior monitoring and automated alerting"
  ENVIRONMENT runner "ubuntu-latest"
  ACTION exec
    LOG "Activating ALN real-time behavior monitor"
    RUN aln monitor.npc.behavior --output dashboards/behavior-log.aln
    RUN aln alerts.send --on anomaly,critical
    LOG "Behavior monitoring and alerting active"

pipeline "NPC_AI_CI"
  STAGES test-npc-behavior, test-pathfinding, validate-input-data, dialogue-integrity, event-distribution, monitor-behavior

EXECUTE pipeline "NPC_AI_CI"
endmodule




















































































